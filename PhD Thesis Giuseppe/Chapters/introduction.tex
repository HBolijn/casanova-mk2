\section{Games, board games, and video games}

Video games have seen growing adoption among users in the last decade \cite{CHAPTER_1_GROWING_DIFFUSION}. Games have recently reached (and surpassed) other major entertainment industries such as the movies and the music industries \cite{CHAPTER_1_MOVIES_AND_MUSIC}. This fact alone makes games worthy of study, because a better understanding of games would yield benefits to the many people who make or use games in their lives.

Even though games are centered on entertainment, there are other fields of application which feature them prominently. There are opportunities to make use of games in \textit{serious} contexts. Such contexts may be industries like defense, education, scientific exploration, health care, emergency management, city planning, engineering, religion, and politics. This provides a further motivation, in addition to traditional game development tools and techniques, on the interest of games from a research standpoint.

The ease of adapting games to other activities beside entertainment is not difficult to explain. Games are, at their core, \textit{an activity among two or more independent decision-makers seeking to achieve their objectives in some limiting context} \cite{CHAPTER_1_DEFINITION_OF_GAME}. In some sense games can be seen as a simulation of the way human beings experience reality, even though with differences such as simplifications or unrealistic elements. This stems from the fact that humans are accustomed to making decisions in a limited context in order to achieve some goal. Decisions range from ``when to shoot'', to ``where to go'', to ``which items to buy''. The limited context consists of the fact that decisions must be made to allocate limited resources or sometimes with incomplete knowledge about the game world. Goals may vary; games have goals that range from prolonged survival, to defeat of the opponents, to maximization of some of the game resources, etc.

There are multiple types of games. In this work we focus on video games, which are a digital adaptation to an earlier form known as \textit{board games}. Board games are games played in the real world and which involve physical counters or pieces moved or placed on a pre-marked surface or ``board'', according to a set of rules. There are multiple types and styles of board games, and multiple themes and representations of real-life situations. For example, chess features a simplified representation of a battlefield, while tic-tac-toe features no inherent theme. Rules can range from simple, as in checkers, or very detailed, as in Dungeons \& Dragons. Dungeons \& Dragons specifically is a role-playing game, where the board is secondary to the game and is only used to help visualize the game scenario.

The definition of the actions allowed by the game and the objective to achieve determines whether or not the game is a serious one or not, and how amusing it can be playing it. For example, survival in daily life can be fun as long as it is challenging, fast paced, and the consequences of actions are exaggerated. The same setting, but with slower actions, limited consequences, and in real time could be far less interesting for a game but may offer some educational insight to the players. Survival in a challenging environment can either be fun or enlightening for the player, as long as he gets the right tools to overcome the challenge in some way.

The use of games for serious purposes has been known for a long time. There are well-documented instances of the use of games in educational circles since the 1900s \cite{CHAPTER_1_EDUCATIONAL_GAMES_1900}.

Video games feature many of the same characteristics of board games, with the important exception of being digital. This means that the rules of the game and the coherency of the game world with said rules is maintained automatically by software. Video games are often in real-time, since the program may incorporate actual time in the decisions and the visualization of the game world. Video games may also feature bigger and more complex sets of rules than those of board games. This is made possible by the assistance provided by a program in handling those sets of rules: players do not need to learn all the rules before playing, but can instead start playing right away and learn the rules through in-game tutorials, experimentation, and even trial-and-error. The real-time aspects such as a high-quality visual simulation, and the larger rule-sets make games an excellent candidate for the representation of many simulations, with multiple degrees of realism. 

Video games can be built according to many different philosophies. The biggest, commercial games, commonly referred to as \textit{AAA games}, often cost in the order of tens of millions of dollars to be developed, and require the focused efforts of tens of professionals during several years of development. Other games may be developed by a smaller team and with a smaller budget, and in this case they are referred to as \textit{indie games} (or \textit{independent games}) \cite{CHAPTER_1_INDIE_GAMES_ON_SMARTPHONES_AND_TABLETS}. Another genre of games, which development is closer to indie games than to AAA games, is that of \textit{serious games} \cite{CHAPTER_1_SERIOUS_GAMES}. Serious games are those games which are not built for the entertainment of the player but rather for his enlightenment, education, or training. 


\section{The challenge of game development}

The costs associated with making games are always high because of the technical challenges involved, and while this is obviously true for AAA games, it is also true (due proportions given) for indie-games and serious-games.

The adoption of modern computers in the 1980s renewed the movement of educational games with the introduction of educational video games. This genre of games is labeled \textit{edutainment} \cite{CHAPTER_1_EDUTAINMENT}, a portmanteau of \textit{education} and \textit{entertainment}. Notable games used for the purpose were Oregon Trail, Math Blaster, and Number Munchers \cite{CHAPTER_1_OLD_EDUCATIONAL_VIDEOGAMES}. Serious games encountered strong issues from the very beginning: they continuously failed to prove profitable. The technological hurdles associated with making games put makers of serious games in the difficult position of risking a large investment for little chances of profit. This has led to the search for different purposes to which apply serious games \cite{CHAPTER_1_APPLICATIONS_OF_SERIOUS_GAMES}. In 2002, the movement called \textit{serious games movement} was born from the Woodrow Wilson International Center for Scholars, which aimed at studying the use of serious games outside the educational sector and in more profitable venues. Among the main users and producers of such games is the United States Army, with notable titles such as America's Army and Full Spectrum Warrior that were also diffused among regular players who used them for entertainment purposes. Interestingly, military officers have been using non-digital war games in order to train strategic skills for a long time. One early example of such game is the 19th century Prussian military training game \textit{Kriegsspiel}.

Similar problems are faced by indie-games \cite{CHAPTER_1_ISSUES_WITH_INDIE_GAMES}. Indie-games are typically sold below the 10\$ mark (or are based on advertisement), and are often played in browsers, smart-phones and tablets. These games are full-fledged games from all points of view, but they are built with a smaller scope than major titles \cite{CHAPTER_1_INDIE_GAMES_SIZE}.

Smaller development efforts paradoxically encounter more difficulties than big studios. This happens because big studios have many more resources to employ in order to tackle the problem, and thus can create huge and complex games with sheer brute-force. Such luxury is rarely afforded by indie and serious developers. This issue has spurred the growth of substantial interest in research on principled design techniques and on cost-effective development technologies for game architectures. Our present endeavor makes a step along the directions of studying disciplined models for game development. This is fueled by the observation of the higher creative freedom that these games afford, which leads them to explore new forms and concepts with less risk for losing capital when compared with AAA games. Also, innovation in serious games could have a significant impact in new forms of education, a lofty goal that could provide widespread and long-term benefits. The impact of lower-cost development strategies for making indie and serious games would be an increase in pace in the innovation in the field. This leads us to observe the \textit{significance} of indie and serious games, and is the reason why our research will focus on indie and serious games rather than AAA games.

The goal of this thesis is to mitigate the risks incurred when making a game, by reducing the technological hurdles associated with game development. We aim at doing so through the introduction of the Casanova game development language which eliminates many game development patterns and activities that often recur in games. Of course our approach does not aim at solving \textit{all failure causes} of games. Specifically if the art, design, or chosen algorithms are not of sufficient quality, then the game will fail even if the technology it used simplified some of its coding.

\section{Problem statement}

We can state the general problem that we tackle in this work as follows: \textit{indie and serious games are powerful vectors for innovation both in and out of the field of games; they are also costly to build and maintain, and thus this innovation happens with difficulty as many of those games either fail to finish development or fail to achieve profitability.}


\section{Research questions and process}

Our research will be aimed at the reduction in cost and complexity of the effort of game development. Our goal is to allow smaller teams with less resources (such as a research group in education) to tackle the development of complex and advanced games with increased chances of success.

The process of game development that we aim at simplifying is the central focus of this work. To achieve this simplification, we start by reasoning on how games are usually created. Games are made by creating and reusing components which are called \textit{game engines} \cite{CHAPTER_1_GAME_ENGINES}. Game engines are large and powerful tools that are hard to maintain and modify incrementally \cite{CHAPTER_1_GAME_ENGINES}. Also, the changing landscape of gaming consoles and platforms forces the obsolescence of many such systems after a few years. For this reason, game developers tend to follow the cycle of building a game engine, and then use it as long as possible to release various games based on that engine (incrementally fixing its bugs and adjusting it slightly) \cite{CHAPTER_1_GAME_ENGINES_MUST_BE_REBUILT_OFTEN}. This process has the evident shortcomings that games based on the same engine tend to be very similar to each other; for example, subsequent games in the Halo series, such as Halo 3 and Halo ODST, or Halo Reach and Halo Anniversary, look and feel very similar to each other and "only" feature new levels, weapons, scenarios, and stories. A less evident shortcoming is that, since building an engine is a costly and risky effort, engines tend to be similar to each other and to their previous incarnations. Game development is a risky enough endeavour already, and so engines are built only around proven game concepts and genres such as sports game, real-time-strategy game (RTS), role playing game (RPG), first-person-shooter (FPS), and so on.

The specific problem that we wish to solve then is that modern game development employs game engines and traditional software engineering. The programming languages and techniques used for making games are intended for other purposes, namely representing and manipulating data that is transformed from some input into some output. Most computer programs are still related to the early models of computation \cite{CHAPTER_1_EARLY_MODELS_OF_COMPUTATION}, that is performing mathematical computations that require little to no user intervention. Interactivity is an aspect of computer programming that has emerged only in recent times. We argue that \textit{using languages and abstractions designed for the specific purpose of building games and interactive simulations, rather than using general purpose ones, can reduce the difficulty and economical risks of making games}. We also argue that currently available tools and techniques have shaped an industry that is excessively risk averse and which does not easily create games that are truly innovative in terms of gameplay, AI, story-telling, etc. As an informal proof of this last statement, we believe that the similarity between a large number of commercial games illustrates how averse to exploring new avenues the industry is: from football simulators, to street-car racing games, to World War II simulators, to endless sequels, the number of games that expand the horizon of game development with true innovation is limited.

We believe that the solution to the problem of game development cost and complexity is that of studying a language that is tailored specifically to game making. We argue that a language for making games should be: \textit{(i)} simple, because the language itself should not be an obstacle to the developer; \textit{(ii)} useful across all game development tasks, because otherwise it would not support all aspects of game development but only specific portions of it; \textit{(iii)} general in that it does not constrain the kind of games that are built with it, because otherwise it would not support game development in general but only the building of certain games; and \textit{(iv)} fully composable, that is all reasonable combinations of its features should be possible, because otherwise the developer would be burdened with learning all kinds of (sometimes unintuitive) internal compatibilities and exceptions \footnote{Such desire for simplicity is inspired by works such as lambda calculus, which shows how few but composable primitives may express anything computable \cite{CHAPTER1_LAMBDA_CALCULUS}}.

The research questions that we propose to answer in this thesis are:

\input{Chapters/research_questions}


\subsection{A new programming language}
We conclude this section by stating that building a new language is a useful exercise when facing problems in a complex domain. We do not only argue that games are a complex domain in its own right that should be treated separately from other programming areas. We note that most programming systems, languages, and even software engineering disciplines are adapted to games but are not designed with them in mind. This leads us to the conviction that a new language that lends itself to all game development activities, by automating what is repetitive and by leaving freedom as needed, is an important step in reducing the burdens of game developers. We finally note, in passing, that languages for games are not the only tool that is lacking, and more general research in the direction of finding the optimal systems and development strategies for games would offer important benefits.


\section{Structure of This Work}
In this work we explore the creation and implementation of a novel language for making games, Casanova. Casanova generalizes our knowledge of the common patterns and techniques for making game into a programming language which syntax and semantics are centered around game development activities. Expressing many aspects of game development can be shorter and clearer in Casanova than it can be in traditional, general purpose programming languages, since Casanova already has many relevant primitives built-in. 

Casanova is also the name of a .Net framework for game development that we have built around the F\# language. Using an existing language and its tool-chain yields important benefits such as a debugger, a profiler, code-completion, and more. The framework is a limited version of the language, since using an existing language allows for less freedom when adding syntactic constructs; this means that while the framework is more usable in practice, it also loses some of the theoretical advantages that the language could offer.

We start by describing the requirements that many modern real-time games share in Chapter \ref{chap:game_requirements}. We then overview the existing systems for making games in Chapter \ref{chap:available_systems}. 

We move on to the design, semantics, and implementation of Casanova in Chapters \ref{chap:design}, \ref{chap:syntax}, \ref{chap:semantics}, and \ref{chap:implementation}. In Chapter \ref{chap:implementation} we also discuss the implementation trade-offs, that is those disadvantages that come from implementing Casanova as an F\# library rather than as its own set of tools.

We evaluate the feasibility of Casanova by studying how easy it is to make games in it in Chapter \ref{chap:making_games}, and by comparing it with existing languages and systems for making games in Chapter \ref{chap:evaluation}.

We conclude with a discussion of the limitations and future work in Chapters \ref{chap:discussion} and \ref{chap:conclusions}.

In the Appendices \ref{chap:menu_system} and \ref{chap:networking} we describe some of the features of Casanova that are "almost there": a menu system and automated networking support for multi-player games. We also describe how a goal-oriented planning AI could act as a general-purpose AI system for Casanova in Appendix \ref{chap:goap}. In Appendix \ref{chap:casanova_and_dbs} we discuss how databases offered an interesting set of inspirations that ultimately shaped up Casanova in its current form. In appendix \ref{chap:casanova_in_haskell_and_cpp} we sketch how Casanova could be implemented with different, well-known languages such as Haskell and C++. In the final appendices, \ref{chap:fsharp}, and \ref{chap:monads}, we offer a brief introduction to F\#, the language we used to build the Casanova framework, and monads, an important tool from Category Theory and functional programming that we heavily used in the construction of Casanova.
